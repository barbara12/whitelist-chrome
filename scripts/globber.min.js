(function(){var c,b,a;a=(typeof exports!=="undefined"&&exports!==null)?exports:this;c=function(j,l){var h,f,g,d,k,i,e;if(!(l!=null)){l=c.DEFAULT_MASK}g=(l&c.CASE_INSENSITIVE_MASK)!==0;e=(l&c.STAR_CANNOT_MATCH_ZERO_MASK)!==0;i=(l&c.QUESTION_CAN_MATCH_ZERO_MASK)!==0;f=new b();k=false;h=j.length;for(d=0;(0<=h?d<h:d>h);(0<=h?d+=1:d-=1)){switch(j[d]){case"*":if(k){f.append("*")}else{f.append(e?".+":".*")}break;case"?":if(k){f.append("?")}else{f.append(i?".?":".")}break;case"[":k=true;f.append(j[d]);if(d+1<j.length){switch(j[d+1]){case"!":case"^":f.append("^");d++;break;case"]":f.append("]");d++;break}}break;case"]":k=false;f.append(j[d]);break;case"\\":f.append("\\");if(d===j.length-1){f.append("\\")}else{if(this.__isGlobMetaCharacter(j[d+1])){f.append(j[++d])}else{f.append("\\")}}break;default:if(!k&&this.__isRegExpMetaCharacter(j[d])){f.append("\\")}f.append(j[d])}}this.regexp=f.toString();if(j.match(/^[^.*]+\.[^.]+$/)){this.regexp=("(.+\\.)?"+(this.regexp))}this.regexp=("^"+(this.regexp)+"$");this.mods="";if(g){this.mods+=c.CASE_INSENSITIVE_MOD}return this};c.prototype.__isGlobMetaCharacter=function(d){return"*?[]".indexOf(d)>=0};c.prototype.__isRegExpMetaCharacter=function(d){return"'*?+[]()|^$.{}/\\".indexOf(d)>=0};c.prototype.compile=function(){return new RegExp(this.regexp,this.mods)};c.prototype.toString=function(){return("/"+(this.regexp)+"/"+(this.mods))};c.CASE_INSENSITIVE_MASK=1;c.STAR_CANNOT_MATCH_ZERO_MASK=2;c.QUESTION_CAN_MATCH_ZERO_MASK=3;c.DEFAULT_MASK=c.CASE_INSENSITIVE_MASK;c.CASE_INSENSITIVE_MOD="i";b=function(){this.buffer=[];return this};b.prototype.append=function(d){this.buffer.push(d);return this.buffer};b.prototype.toString=function(){return this.buffer.join("")};a.Globber=c}).call(this);